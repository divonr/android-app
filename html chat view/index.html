<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Export</title>
    <link rel="stylesheet" href="style.css">
    <!-- KaTeX for LaTeX rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <!-- Marked.js for Markdown parsing -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- CryptoJS for AES decryption -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
</head>

<body>
    <div class="app-container">
        <!-- Top Bar -->
        <div class="top-bar">
            <div class="chat-title" id="chat-title">Loading chat...</div>
            <div class="controls">
                <!-- System Prompt Button (wrench/build icon) -->
                <button class="toolbar-btn" id="system-prompt-btn" title="System Prompt">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z" />
                    </svg>
                </button>
                <!-- Text Direction Buttons (3 square buttons) -->
                <div class="direction-btn-group">
                    <button class="dir-btn" id="dir-rtl" title="RTL">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z" />
                        </svg>
                    </button>
                    <button class="dir-btn active" id="dir-auto" title="Auto">A</button>
                    <button class="dir-btn" id="dir-ltr" title="LTR">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- System Prompt Dialog (hidden by default) -->
        <div class="dialog-overlay" id="system-prompt-overlay">
            <div class="dialog-container">
                <div class="dialog-header">
                    <span class="dialog-title">System Prompt</span>
                </div>
                <div class="dialog-body">
                    <div class="dialog-textarea" id="system-prompt-content">אין סיסטם פרומפט</div>
                </div>
                <div class="dialog-actions">
                    <button class="dialog-btn" id="system-prompt-close">סגור</button>
                </div>
            </div>
        </div>

        <!-- Chat Area -->
        <div class="chat-area" id="chat-area">
            <!-- Messages will be injected here by script.js -->
            <div style="text-align: center; margin-top: 20px; opacity: 0.6;">Loading messages...</div>
        </div>

        <!-- Input Area (Read Only) -->
        <div class="input-area">
            <div class="input-container">
                <span class="input-placeholder">Read only view</span>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>